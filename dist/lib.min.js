!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("datocms-client"),require("lodash")):"function"==typeof define&&define.amd?define(["exports","datocms-client","lodash"],t):t((e=e||self).DatoCMSTools={},e.datocmsClient,e.lodash)}(this,(function(e,t,r){"use strict";function n(e,t,r,n,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(i,a){var o=e.apply(t,r);function s(e){n(o,i,a,s,u,"next",e)}function u(e){n(o,i,a,s,u,"throw",e)}s(void 0)}))}}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(r,!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function c(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(){return(p=i(regeneratorRuntime.mark((function e(n){var a,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.apiKey){e.next=3;break}throw new Error("Must pass apiKey.");case 3:return o=new t.SiteClient(a),e.next=6,o.itemTypes.all();case 6:return s=e.sent,e.next=9,Promise.all(s.map(function(){var e=i(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.fields.all(t.id));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:return u=e.sent,e.abrupt("return",{itemTypes:s,fields:r.chain(u).flatten().sortBy("position").value()});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=i(regeneratorRuntime.mark((function e(r){var n,a,o,p,l,f,d,m,y,v,h,x,g,w,T,b,k,K,R,I,E,O,F,S,j,P,A,M,C,B,Y,D,q;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.apiKey,a=r.models,o=new t.SiteClient(n),p=[],l=[],f=a.itemTypes,d=a.fields,e.next=7,o.itemTypes.all();case 7:return p=e.sent,m=function(e){e.id,e.singletonItem,e.fields,e.titleField,e.orderingField;return u(e,["id","singletonItem","fields","titleField","orderingField"])},y=function(e){e.id,e.position,e.itemType;return u(e,["id","position","itemType"])},v=function(e){var t=f.find((function(t){return t.id===e}));if(!t)throw new Error('old itemType with id "'.concat(e,'" not found.'));return p.find((function(e){return e.apiKey===t.apiKey})).id},h=function(e,t){var r=d.find((function(t){return t.id===e}));if(!r)throw new Error('old field with id "'.concat(e,'" not found.'));return l.find((function(e){return e.apiKey===r.apiKey&&e.itemType===t.id})).id},e.next=14,Promise.all(p.map(function(){var e=i(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.fields.all(t.id);case 2:r=e.sent,l=[].concat(c(l),c(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 14:return e.next=16,Promise.all(f.map(function(){var e=i(regeneratorRuntime.mark((function e(t){var r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=p.find((function(e){return e.apiKey===t.apiKey})),n=r||t,i=m(t),!r){e.next=10;break}return console.info("itemType ".concat(n.apiKey," already exists, updating...")),e.next=7,o.itemTypes.update(n.id,i);case 7:n=e.sent,e.next=14;break;case 10:return console.info("itemType ".concat(n.apiKey," doesn't exist, creating...")),e.next=13,o.itemTypes.create(i);case 13:n=e.sent;case 14:p=[].concat(c(p),[n]);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 16:x=function(e){return"slug"!==e.fieldType},g=d.filter(x),w=d.filter((function(e){return!x(e)})),T=[].concat(c(g),c(w)),b=!0,k=!1,K=void 0,e.prev=23,R=regeneratorRuntime.mark((function e(){var t,r,n,i,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=E.value,r=f.find((function(e){return e.id===t.itemType})),n=p.find((function(e){return e.apiKey===r.apiKey})),i=y(t),a=l.find((function(e){return e.apiKey===t.apiKey&&e.itemType===n.id})),u=a||t,t.validators&&t.validators.richTextBlocks&&t.validators.richTextBlocks.itemTypes&&t.validators.richTextBlocks.itemTypes.length&&(i.validators={richTextBlocks:{}},i.validators.richTextBlocks.itemTypes=t.validators.richTextBlocks.itemTypes.map(v)),t.validators&&t.validators.itemsItemType&&t.validators.itemsItemType.itemTypes&&t.validators.itemsItemType.itemTypes.length&&(i.validators={itemsItemType:{}},i.validators.itemsItemType.itemTypes=t.validators.itemsItemType.itemTypes.map(v)),t.validators&&t.validators.itemItemType&&t.validators.itemItemType.itemTypes&&t.validators.itemItemType.itemTypes.length&&(i.validators={itemItemType:{}},i.validators.itemItemType.itemTypes=t.validators.itemItemType.itemTypes.map(v)),t.validators&&t.validators.slugTitleField&&t.validators.slugTitleField.titleFieldId&&(i.validators=s({},t.validators),i.validators.slugTitleField={titleFieldId:""},i.validators.slugTitleField.titleFieldId=h(t.validators.slugTitleField.titleFieldId,n)),!a){e.next=18;break}return console.info("field ".concat(u.apiKey," already exists, updating ...")),e.next=14,o.fields.update(a.id,i);case 14:u=e.sent,l=l.map((function(e){return e.id===u.id?u:e})),e.next=23;break;case 18:return console.info("field ".concat(u.apiKey," doesn't exist, creating ...")),e.next=21,o.fields.create(n.id,i);case 21:u=e.sent,l=[].concat(c(l),[u]);case 23:case"end":return e.stop()}}),e)})),I=T[Symbol.iterator]();case 26:if(b=(E=I.next()).done){e.next=31;break}return e.delegateYield(R(),"t0",28);case 28:b=!0,e.next=26;break;case 31:e.next=37;break;case 33:e.prev=33,e.t1=e.catch(23),k=!0,K=e.t1;case 37:e.prev=37,e.prev=38,b||null==I.return||I.return();case 40:if(e.prev=40,!k){e.next=43;break}throw K;case 43:return e.finish(40);case 44:return e.finish(37);case 45:O=!0,F=!1,S=void 0,e.prev=48,j=regeneratorRuntime.mark((function e(){var t,r,n,i,a,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=A.value,r=void 0,n=void 0,i=p.find((function(e){return e.apiKey===t.apiKey})),t.titleField&&((a=d.find((function(e){return e.id===t.titleField})))?r=l.find((function(e){return e.apiKey===a.apiKey})).id:console.log("titleField with id ".concat(t.titleField," not found"))),t.orderingField&&((u=d.find((function(e){return e.id===t.orderingField})))?n=l.find((function(e){return e.apiKey===u.apiKey})).id:console.log("orderingField with id ".concat(t.titleField," not found"))),c=s({},m(i),{titleField:r,orderingField:n}),e.next=9,o.itemTypes.update(i.id,c);case 9:case"end":return e.stop()}}),e)})),P=f[Symbol.iterator]();case 51:if(O=(A=P.next()).done){e.next=56;break}return e.delegateYield(j(),"t2",53);case 53:O=!0,e.next=51;break;case 56:e.next=62;break;case 58:e.prev=58,e.t3=e.catch(48),F=!0,S=e.t3;case 62:e.prev=62,e.prev=63,O||null==P.return||P.return();case 65:if(e.prev=65,!F){e.next=68;break}throw S;case 68:return e.finish(65);case 69:return e.finish(62);case 70:M=!0,C=!1,B=void 0,e.prev=73,Y=regeneratorRuntime.mark((function e(){var t,r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=q.value,r=f.find((function(e){return e.id===t.itemType})),n=p.find((function(e){return e.apiKey===r.apiKey})),i=l.find((function(e){return e.apiKey===t.apiKey&&e.itemType===n.id})),e.next=6,o.fields.update(i.id,{position:t.position});case 6:case"end":return e.stop()}}),e)})),D=d[Symbol.iterator]();case 76:if(M=(q=D.next()).done){e.next=81;break}return e.delegateYield(Y(),"t4",78);case 78:M=!0,e.next=76;break;case 81:e.next=87;break;case 83:e.prev=83,e.t5=e.catch(73),C=!0,B=e.t5;case 87:e.prev=87,e.prev=88,M||null==D.return||D.return();case 90:if(e.prev=90,!C){e.next=93;break}throw B;case 93:return e.finish(90);case 94:return e.finish(87);case 95:case"end":return e.stop()}}),e,null,[[23,33,37,45],[38,,40,44],[48,58,62,70],[63,,65,69],[73,83,87,95],[88,,90,94]])})))).apply(this,arguments)}function f(){return(f=i(regeneratorRuntime.mark((function e(r){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.apiKey,i=new t.SiteClient(n),e.abrupt("return",i.menuItems.all());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=i(regeneratorRuntime.mark((function e(r){var n,i,a,o,p,l,f,d,m,y,v,h,x,g,w,T,b,k,K;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.apiKey,i=r.menuItems,a=r.models,o=new t.SiteClient(n),e.next=4,o.itemTypes.all();case 4:return p=e.sent,e.next=7,o.menuItems.all();case 7:l=e.sent,f=function(e){e.id;return u(e,["id"])},d=!0,m=!1,y=void 0,e.prev=12,v=regeneratorRuntime.mark((function e(){var t,r,n,i,u,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=x.value,r=a.itemTypes.find((function(e){return e.id===t.itemType})),n=p.find((function(e){return e.apiKey===r.apiKey})),i=l.find((function(e){return e.itemType===n.id})),u=s({},f(t),{itemType:n.id}),d=i||t,!i){e.next=14;break}return console.log("menuItem ".concat(i.label," already exists, updating...")),e.next=10,o.menuItems.update(i.id,u);case 10:d=e.sent,l=l.map((function(e){return e.id===d?d:e})),e.next=19;break;case 14:return console.log("menuItem ".concat(d.label," doesn't exist, creating...")),e.next=17,o.menuItems.create(u);case 17:d=e.sent,l=[].concat(c(i),[d]);case 19:case"end":return e.stop()}}),e)})),h=i[Symbol.iterator]();case 15:if(d=(x=h.next()).done){e.next=20;break}return e.delegateYield(v(),"t0",17);case 17:d=!0,e.next=15;break;case 20:e.next=26;break;case 22:e.prev=22,e.t1=e.catch(12),m=!0,y=e.t1;case 26:e.prev=26,e.prev=27,d||null==h.return||h.return();case 29:if(e.prev=29,!m){e.next=32;break}throw y;case 32:return e.finish(29);case 33:return e.finish(26);case 34:g=!0,w=!1,T=void 0,e.prev=37,b=regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=K.value,r=p.find((function(e){return e.id===t.itemType})),n=a.itemTypes.find((function(e){return e.apiKey===r.apiKey})),i.find((function(e){return e.itemType===n.id}))){e.next=7;break}return e.next=7,o.menuItems.destroy(t.id);case 7:case"end":return e.stop()}}),e)})),k=l[Symbol.iterator]();case 40:if(g=(K=k.next()).done){e.next=45;break}return e.delegateYield(b(),"t2",42);case 42:g=!0,e.next=40;break;case 45:e.next=51;break;case 47:e.prev=47,e.t3=e.catch(37),w=!0,T=e.t3;case 51:e.prev=51,e.prev=52,g||null==k.return||k.return();case 54:if(e.prev=54,!w){e.next=57;break}throw T;case 57:return e.finish(54);case 58:return e.finish(51);case 59:case"end":return e.stop()}}),e,null,[[12,22,26,34],[27,,29,33],[37,47,51,59],[52,,54,58]])})))).apply(this,arguments)}function m(){return(m=i(regeneratorRuntime.mark((function e(r){var n,a,o,s,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.apiKey,a=new t.SiteClient(n),e.next=4,a.items.all();case 4:return o=e.sent,e.next=7,a.menuItems.all();case 7:return s=e.sent,u=function(){var e=i(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("deleting item types..."),e.next=3,a.itemTypes.all();case 3:return t=e.sent,e.abrupt("return",Promise.all(t.map(function(){var e=i(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.itemTypes.destroy(t.id));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=9,console.log("deleting menu items..."),e.next=13,Promise.all(s.map(function(){var e=i(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.menuItems.destroy(t.id));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(9),console.log(e.t0);case 18:return e.prev=18,console.info("deleting items..."),e.next=22,Promise.all(o.map(function(){var e=i(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.items.destroy(t.id));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(18),console.log(e.t1);case 27:c=!1;case 28:return e.prev=28,e.next=31,u();case 31:c=!1,e.next=37;break;case 34:e.prev=34,e.t2=e.catch(28),c=!0;case 37:if(c){e.next=28;break}case 38:case"end":return e.stop()}}),e,null,[[9,15],[18,24],[28,34]])})))).apply(this,arguments)}function y(){return(y=i(regeneratorRuntime.mark((function e(r){var n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.apiKey){e.next=3;break}throw new Error("Must pass apiKey.");case 3:return i=new t.SiteClient(n),e.next=6,i.items.all({},{allPages:!0});case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=function(e){return/^\d+$/.test(e)&&e.length>4},h=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=t.findIndex((function(e){return e.id===r.id})),a=t[i+1],o=n.find((function(e){return e.id===r.id}));return o?n:(Object.keys(r).forEach((function(i){var a=r[i],o=[];if("id"!==i&&v(a)&&o.push(i),o.includes(i)){var s=t.find((function(e){return e.id===a}));if(s)return e(t,s,n)}Array.isArray(a)&&a.forEach((function(r){var i=t.find((function(e){return e.id===r}));return e(t,i,n)}))})),n.push(r),a?e(t,a,n):n)};function x(){return(x=i(regeneratorRuntime.mark((function e(r){var n,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.apiKey){e.next=3;break}throw new Error("Must pass apiKey.");case 3:return a=new t.SiteClient(n),e.next=6,a.items.all();case 6:if((o=e.sent).length){e.next=9;break}return e.abrupt("return");case 9:return s=h(o,o[0]).reverse(),e.next=12,Promise.all(s.map(function(){var e=i(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.items.destroy(t.id);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=i(regeneratorRuntime.mark((function e(r){var n,i,a,o,c,p,l,f,d,m,y,x,g,w,T,b,k,K,R,I,E,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.apiKey,i=r.content,a=r.models,n){e.next=3;break}throw new Error("Must pass apiKey.");case 3:if(i){e.next=5;break}throw new Error("Must pass an array containing items.");case 5:return o=new t.SiteClient(n),e.next=8,o.itemTypes.all();case 8:return c=e.sent,e.next=11,o.items.all();case 11:if(p=e.sent,l=[],!p.length){e.next=15;break}throw new Error("You already have content in this project.");case 15:f=h(i,i[0]),d=f,a&&(d=f.map((function(e){var t=a.itemTypes.find((function(t){return t.id===e.itemType}));if(!t)throw new Error("Could not find matching itemType. Are you sure you provided the right models?");var r=c.find((function(e){return e.apiKey===t.apiKey})),n=s({},e);return n.itemType=r.id,n}))),m=!0,y=!1,x=void 0,e.prev=21,g=regeneratorRuntime.mark((function e(){var t,r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.value,t.id,t.meta,t.creator,t.updatedAt,t.createdAt,r=u(t,["id","meta","creator","updatedAt","createdAt"]),n=s({},r),Object.keys(n).forEach((function(e){var t=n[e];if(t&&"string"==typeof t&&!t.length&&(n[e]=null),t&&"itemType"!==e&&v(t)){var r=l.find((function(e){return e.old.id===t})).new.id;r&&(n[e]=r)}})),e.next=6,o.items.create(n);case 6:i=e.sent,l.push({old:t,new:i});case 8:case"end":return e.stop()}}),e)})),w=d[Symbol.iterator]();case 24:if(m=(T=w.next()).done){e.next=29;break}return e.delegateYield(g(),"t0",26);case 26:m=!0,e.next=24;break;case 29:e.next=35;break;case 31:e.prev=31,e.t1=e.catch(21),y=!0,x=e.t1;case 35:e.prev=35,e.prev=36,m||null==w.return||w.return();case 38:if(e.prev=38,!y){e.next=41;break}throw x;case 41:return e.finish(38);case 42:return e.finish(35);case 43:return e.next=45,o.items.all();case 45:b=e.sent,console.log("FRESH ITEMS",b),k=!0,K=!1,R=void 0,e.prev=50,I=regeneratorRuntime.mark((function e(){var t,r,n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.value,r=l.find((function(e){return e.new.id===t.id})).old,n=l.find((function(e){return e.old.id===r.parentId})),i=n?n.new.id:null,a={position:r.position,parentId:i},console.log("updating with",a),e.next=8,o.items.update(t.id,a);case 8:case"end":return e.stop()}}),e)})),E=b[Symbol.iterator]();case 53:if(k=(O=E.next()).done){e.next=58;break}return e.delegateYield(I(),"t2",55);case 55:k=!0,e.next=53;break;case 58:e.next=64;break;case 60:e.prev=60,e.t3=e.catch(50),K=!0,R=e.t3;case 64:e.prev=64,e.prev=65,k||null==E.return||E.return();case 67:if(e.prev=67,!K){e.next=70;break}throw R;case 70:return e.finish(67);case 71:return e.finish(64);case 72:case"end":return e.stop()}}),e,null,[[21,31,35,43],[36,,38,42],[50,60,64,72],[65,,67,71]])})))).apply(this,arguments)}e.clearRelations=function(e){var t=e.models,r=t.fields.map((function(e){var t=e;return t.validators&&t.validators.itemsItemType&&(t.validators.itemsItemType.itemTypes=[]),t.validators&&t.validators.itemItemType&&(t.validators.itemItemType.itemTypes=[]),t.validators&&t.validators.richTextBlocks&&(t.validators.richTextBlocks.itemTypes=[]),t}));return{itemTypes:t.itemTypes,fields:r}},e.exportContent=function(e){return y.apply(this,arguments)},e.exportMenu=function(e){return f.apply(this,arguments)},e.exportModels=function(e){return p.apply(this,arguments)},e.extractModels=function(e){var t,n=e.apiKeys,i=e.models;if(!n)throw new Error("Must pass at least one name of a model.");if(!i||!i.itemTypes||!i.fields)throw new Error("Must pass models containing itemTypes and fields.");if((t=Array.isArray(n)?i.itemTypes.filter((function(e){return n.includes(e.apiKey)})):i.itemTypes.filter((function(e){return e.apiKey===n}))).length<=0)return console.warn("No matching model in:",n),{itemTypes:[],fields:[]};var a=[];return t.forEach((function(e){!function e(n){t.find((function(e){return e.id===n.id}))||t.push(n),n.fields.forEach((function(t){var n=i.fields.find((function(e){return e.id===t}));if(!a.find((function(e){return e.id===n.id}))){a.push(n);["validators.itemsItemType.itemTypes","validators.itemItemType.itemTypes","validators.richTextBlocks.itemTypes"].forEach((function(t){var a=r.get(n,t);a&&a.forEach((function(t){var r=i.itemTypes.find((function(e){return e.id===t}));e(r)}))}))}}))}(e)})),{itemTypes:t,fields:a}},e.importContent=function(e){return g.apply(this,arguments)},e.importMenu=function(e){return d.apply(this,arguments)},e.importModels=function(e){return l.apply(this,arguments)},e.removeModels=function(e){var t,n=e.apiKeys,i=e.models;if(!n)throw new Error("Must pass one or more apiKeys.");if("string"!=typeof n&&!Array.isArray(n))throw new Error("apiKeys must be string or array.");if(!i||!i.itemTypes||!i.fields)throw new Error("Must pass models containing itemTypes and fields.");if((t=Array.isArray(n)?i.itemTypes.filter((function(e){return n.includes(e.apiKey)})):i.itemTypes.filter((function(e){return e.apiKey===n}))).length<=0)return console.warn("No matching model in:",n),i;var a=s({},i);return t.forEach((function(e){a.itemTypes=a.itemTypes.filter((function(t){return t.apiKey!==e.apiKey})),a.fields=a.fields.filter((function(t){return!e.fields.includes(t.id)})),a.fields.forEach((function(t){var n=s({},t);["validators.itemsItemType.itemTypes","validators.itemItemType.itemTypes","validators.richTextBlocks.itemTypes"].forEach((function(i){var a=r.get(t,i);a&&a.includes(e.id)&&r.set(n,i,a.filter((function(t){return t!==e.id})))}))}))})),a},e.reset=function(e){return m.apply(this,arguments)},e.resetContent=function(e){return x.apply(this,arguments)},Object.defineProperty(e,"__esModule",{value:!0})}));
